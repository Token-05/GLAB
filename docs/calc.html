<!DOCTYPE html>
<html>
  <head>
        <meta charset="utf-8" />
        <!-- PyScriptの読み込み -->
        <link rel="stylesheet" href="https://pyscript.net/releases/2023.11.2/core.css" />
        <script type="module" src="https://pyscript.net/releases/2023.11.2/core.js"></script>
        <!-- PyScriptで使うパッケージを指定 --- (*1) -->
        <py-config>
            packages = ["numpy"]
        </py-config>
  </head>
  <body>
    <h1>給料計算</h1>
    <p>開始時間、終了時間、時間給を入力してください：</p>
    <input type="text" id="salary" placeholder="時間給(例：1350)" />
    <input type="text" id="start" placeholder="開始時間(例：20.5)" />
    <input type="text" id="end" placeholder="終了時間(例：5)" />
    <button py-click="calc">計算</button>
    <div id="output"></div>
    <script type="py">
        import numpy as np
        from pyscript import document

        def calc(event):

            salary = float(document.querySelector("#salary").value)
            start = float(document.querySelector("#start").value)
            end = float(document.querySelector("#end").value)
            
            if start > end:
                schedule = list(np.arange(start, 24, 0.5))
                schedule2 = list(np.arange(0, end, 0.5))
                schedule.extend(schedule2)
            else : schedule = np.arange(start, end, 0.5)
            hours = dict()

            for i in schedule:
                hours[i] = salary * 0.5

            # 深夜
            for k in hours.keys():
                if k > 22 or k < 6:
                    hours[k] *= 1.25
            
            # 超過
            if len(hours) > 16:
                tyouka = list(hours.keys())[16:]
                for k in tyouka:
                    hours[k] *= 1.25

            output_div = document.querySelector("#output")
            output_div.innerText = str(sum(hours.values()))
    </script>
  </body>
</html>